# Moving Cosmofy from Replit to Local Development

This guide helps you migrate your Cosmofy space exploration app from Replit to your local machine or any hosting platform.

## Quick Start

### 1. Download Project Files

```bash
# Create project directory
mkdir cosmofy-local
cd cosmofy-local

# Download all files from Replit (copy all files and folders)
# Or use git if you have a repository
```

### 2. Automatic Environment Setup

```bash
# Generate secure environment configuration
node generate-env.js

# This creates:
# - Secure random SESSION_SECRET (128 characters)
# - .env file with proper structure
# - NASA API key placeholders

# Alternative: Manual SESSION_SECRET generation
# node -p "require('crypto').randomBytes(64).toString('hex')"
# or
# node -p "crypto.randomBytes(64).toString('hex')"
```

### 3. Install Dependencies

```bash
npm install

# For Windows users - install cross-platform environment support
npm install --save-dev cross-env
```

### 4. Add Your NASA API Key

```bash
# Edit .env file and replace DEMO_KEY with your actual NASA API key
# Get free key at: https://api.nasa.gov/
```

### 5. Fix Windows npm Scripts (One-time setup)

```bash
# Update package.json scripts for Windows compatibility
node scripts-update.js
```

### 6. Start Development

```bash
# Now works on Windows, Mac, and Linux
npm run dev
# Access at: http://localhost:5000

# Alternative if you encounter issues:
npx cross-env NODE_ENV=development tsx server/index.ts
```

## What is SESSION_SECRET?

**SESSION_SECRET** is a cryptographic key that:

- Encrypts user session data stored in cookies
- Prevents session tampering and security attacks
- Should be a long, random string (64+ characters)
- Must be kept secret and never shared publicly

### Security Requirements

- **Minimum length**: 32 characters
- **Recommended**: 64+ characters
- **Format**: Random alphanumeric string
- **Generation**: Use cryptographically secure random generator

### Example Secure Session Secrets

```bash
# Generated by crypto.randomBytes(64).toString('hex')
SESSION_SECRET=a8f7e2d9c4b6a1e5f8d3c7b2a9e6f4d1c8b5a2e9f6d3c0b7a4e1f8d5c2b9a6e3f0d7c4b1a8e5f2d9c6b3a0e7f4d1c8b5a2e9f6d3c0b7a4e1f8d5c2b9a6e3

# Or use online generator (trusted source only)
# Or generate in terminal: node -p "require('crypto').randomBytes(64).toString('hex')"
```

## Migration Checklist

### Files to Copy from Replit

- ✅ `client/` - React frontend
- ✅ `server/` - Express backend
- ✅ `shared/` - TypeScript types
- ✅ `attached_assets/` - Images and media
- ✅ `package.json` - Dependencies
- ✅ `vite.config.ts` - Build configuration
- ✅ `tailwind.config.ts` - Styling
- ✅ `tsconfig.json` - TypeScript config

### Environment Variables

```env
# Required
NASA_API_KEY=your_real_nasa_api_key_here
VITE_NASA_API_KEY=your_real_nasa_api_key_here
SESSION_SECRET=auto_generated_secure_64_char_string

# Optional
NODE_ENV=development
DATABASE_URL=postgresql://user:pass@localhost:5432/cosmofy
```

### Development Dependencies

All required packages are in `package.json`:

- React 18 + TypeScript
- Express.js server
- Tailwind CSS + shadcn/ui
- GSAP animations
- NASA API integrations
- Database tools (Drizzle ORM)

## Deployment Options

### 1. Local Development

```bash
npm run dev  # Development with hot reload
```

### 2. Production Build

```bash
npm run build  # Create production build
npm start      # Run production server
```

### 3. Docker Deployment

```dockerfile
# Dockerfile (create this file)
FROM node:20-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build
EXPOSE 5000
CMD ["npm", "start"]
```

### 4. Cloud Hosting Options

**Vercel (Recommended)**

```bash
npm i -g vercel
vercel  # Follow prompts
```

**Netlify**

```bash
npm run build
# Upload dist/ folder to Netlify
```

**Railway**

```bash
# Connect GitHub repo
# Auto-deploys on push
```

**DigitalOcean App Platform**

```bash
# Connect repository
# Set environment variables in dashboard
```

## Security Considerations

### Environment Variables

- Never commit `.env` to version control
- Add `.env` to `.gitignore`
- Use different secrets for production
- Rotate session secrets periodically

### API Keys

- NASA API key is free but has rate limits
- Monitor usage in NASA API dashboard
- Consider upgrading for production apps
- Keep API keys secure and private

### Production Checklist

- [ ] Secure SESSION_SECRET generated
- [ ] Environment variables configured
- [ ] Database backups enabled (if using PostgreSQL)
- [ ] HTTPS enabled in production
- [ ] Error logging configured
- [ ] Performance monitoring setup

## Troubleshooting

### Common Issues

**Port Already in Use**

```bash
# Change port in package.json or use different port
PORT=3000 npm run dev
```

**NASA API Rate Limits**

- Free tier: 1000 requests/hour
- Upgrade at api.nasa.gov for higher limits
- App includes caching to reduce API calls

**Session Secret Errors**

```bash
# Regenerate secure session secret
node -p "require('crypto').randomBytes(64).toString('hex')"
```

**Database Connection Issues**

- App uses in-memory storage by default
- PostgreSQL is optional for persistent data
- Check DATABASE_URL format if using PostgreSQL

### Performance Optimization

**For Production**

- Enable gzip compression
- Use CDN for static assets
- Configure caching headers
- Monitor API usage limits

**For Development**

- Use development NASA API key
- Enable hot reload for faster development
- Check browser console for errors

## Backup Strategy

### Important Files to Backup

- `.env` file (keep secure backup)
- `attached_assets/` folder
- Database dumps (if using PostgreSQL)
- Custom configuration files

### Version Control

```bash
# Initialize git repository
git init
git add .
git commit -m "Initial Cosmofy migration from Replit"

# Add remote repository
git remote add origin https://github.com/yourusername/cosmofy.git
git push -u origin main
```

## Support

If you encounter issues during migration:

1. Check console logs for specific errors
2. Verify all environment variables are set
3. Ensure NASA API key is valid
4. Test with DEMO_KEY first to isolate issues
5. Review browser developer tools for client errors

---

Your Cosmofy space exploration platform will have identical functionality locally, including all 15 features: NASA galleries, ISS tracking, constellation guides, space weather data, and the Hindu Panchang calendar system.
